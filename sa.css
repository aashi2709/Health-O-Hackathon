document.addEventListener("DOMContentLoaded", function () {
    displayEvents();
    addUserStories();
});

function addUserStories() {
    const stories = [
        { name: "Sarah K.", age: 32, story: "After struggling with work anxiety for years, the techniques I learned in the stress management workshop gave me practical tools I use every day.", workshop: "Managing Stress in Daily Life" },
        { name: "David M.", age: 45, story: "The mindfulness meditation workshop changed my perspective on self-care. I now take 10 minutes each morning to center myself.", workshop: "Mindfulness Meditation" },
        { name: "Priya S.", age: 28, story: "Building resilience helped me navigate a difficult career transition. I'm stronger now and better equipped to handle life's challenges.", workshop: "Building Resilience" }
    ];
    
    const storiesSection = document.createElement("section");
    storiesSection.className = "user-stories";
    storiesSection.innerHTML = `
        <h2>ðŸ’¬ Community Stories</h2>
        <p>Real experiences from people who've participated in our workshops</p>
        <div class="stories-container"></div>
    `;
    document.body.insertBefore(storiesSection, document.querySelector("footer"));
    
    const container = document.querySelector(".stories-container");
    
    stories.forEach((story, index) => {
        const storyCard = document.createElement("div");
        storyCard.className = "story-card";
        storyCard.innerHTML = `
            <div class="quote-mark">"</div>
            <p class="story-text">${story.story}</p>
            <p class="story-attribution">- ${story.name}, ${story.age}</p>
            <p class="story-workshop">Attended: ${story.workshop}</p>
            <div class="comment-section">
                <input type="text" class="comment-input" placeholder="Write a comment..." id="comment-${index}">
                <button onclick="postComment(${index})">Post</button>
                <div class="comments-list" id="comments-${index}"></div>
            </div>
        `;
        container.appendChild(storyCard);
    });
}

function postComment(index) {
    const commentInput = document.getElementById(`comment-${index}`);
    const commentText = commentInput.value.trim();
    if (!commentText) return;
    
    const commentList = document.getElementById(`comments-${index}`);
    const newComment = document.createElement("p");
    newComment.textContent = `ðŸ’¬ ${commentText}`;
    commentList.appendChild(newComment);
    
    commentInput.value = "";
}
